#!/bin/bash

# Tool to copy and paste dotfiles.
# Adam Heins
# 2015-10-30

DOTFILES=(.zsh .zshrc
          .gitconfig .gitignore
          .vimrc
          .tmux.conf)

case "$1" in
  "copy")
    [ -d files ] && rm -r files
    mkdir files
    for file in ${DOTFILES[@]}; do
      [ -e ~/"$file" ] && rsync -r ~/"$file" "files" --exclude local
    done
    ;;
  "paste")
    [ -d backup ] && rm -r backup
    if [ ! -d files ]; then
      echo "no dotfiles to paste"
      exit 1
    fi
    mkdir backup
    for file in ${DOTFILES[@]}; do
      [ -e ~/"$file" ] && rsync -r ~/"$file" "backup/$file"
      if [ -e "files/$file" ]; then
        [ -e ~/"$file" ] && rm -r ~/"$file"
        rsync -r "files/$file" ~/"$file"
      fi
    done
    [ -d ~/.vim ] && rm -r ~/.vim
    git clone git@github.com:adamheins/.vim ~/.vim --recursive
    ;;
  "clean")
    if [ -d files ]; then
      rm -r files
    else
      echo "nothing to clean"
      exit 1
    fi
    ;;
  "tar")
    [ -f dotfiles.tar.gz ] && rm dotfiles.tar.gz
    tar czvf dotfiles.tar.gz $(for file in ${DOTFILES[@]}; do
      echo ~/"$file"
    done)
    ;;
  *)
    echo "unknown command"
    exit 1
    ;;
esac

exit 0
